$(document).ready(function() {



    $(".events-modal > .problems__swiper-slide_modal_close").click(function() {
    	$(".events-modal-wrap").fadeOut();
    });


	$(".head-menu__nav_ul a").mPageScroll2id({
		scrollSpeed: 1700,
		offset: 70
	});



	$(".my-small-nav a").mPageScroll2id({
		scrollSpeed: 1700,
		offset: 70
	});


	$('#nav-icon').click(function() {
		$(this).toggleClass('nav-icon-active');
		$(".my-small-nav").toggleClass("my-small-nav-active");
	});

	$('.animate-icon').click(function() {
		$('#nav-icon').removeClass('nav-icon-active');
		$(".my-small-nav").removeClass("my-small-nav-active");
	});

	$('.my-small-nav a').click(function() {
		$('#nav-icon').removeClass('nav-icon-active');
		$(".my-small-nav").removeClass("my-small-nav-active");
	});
});


// Modal Model
var queryOffset = 0;
var modelsCount = 0;

function getModel(queryOffset) {
    $.ajax({
        type: 'GET',
        url: 'http://localhost:8888/etalonium-gallery-wp/wp-json/my_endpoint/v1/my_post_type/',
        data: {
            per_page: 1,
            page: queryOffset
        },
        dataType: 'json',
        success: function(data) {
            $('#model-modal-title').text(data[0].post_title);
            $('#model-modal-image').css('background-image', 'url(' + data[0].image + ')');
            $('#model-modal-age').text(data[0].acf.age);
            $('#model-modal-height').text(data[0].acf.height);
            $('#model-modal-location').text(data[0].acf.location);
        }
    });
}

$('.models__gallery_item').click( function () {
    $('#modal-model').fadeIn();
    $('.model-modal__content').css('display', 'flex');

    queryOffset = $(this).data('id') - 1;

    getModel(queryOffset);

    $.ajax({
        type: 'GET',
        url: 'http://localhost:8888/etalonium-gallery-wp/wp-json/get_models_lenght/v1/models/',
        dataType: 'json',
        success: function(data) {
            modelsCount = data.publish;
        }
    });
});

// Next and Prev Btn in Model Modal
$('#model-modal-prev').click( function (e) {
    queryOffset == 0 ? e.preventDefault() : getModel(queryOffset - 1);

    queryOffset = queryOffset == 0 ? 0 : queryOffset - 1;
});

$('#model-modal-next').click( function (e) {
    queryOffset == modelsCount - 1 ? e.preventDefault() : getModel(queryOffset + 1);

    queryOffset = queryOffset == modelsCount - 1 ? modelsCount - 1 : queryOffset + 1;
});

// Close Model Modal
$('#modal-model-close').click( function () {
    $('#modal-model').fadeOut();
    $('.model-modal__content').css('display', 'flex');
});



$(function() {
    var p = new Date(2018, 12, 13, 12, 30, 0).getTime(),
        m = setInterval(function() {
            var e = (new Date).getTime(),
                t = document.getElementById("days"),
                n = document.getElementById("hours"),
                a = document.getElementById("minutes"),
                i = document.getElementById("seconds"),
                o = p - e,
                s = Math.floor(o / 864e5),
                l = Math.floor(o % 864e5 / 36e5),
                r = Math.floor(o % 36e5 / 6e4),
                c = Math.floor(o % 6e4 / 1e3);

            function d(e) { return e = 10 <= e ? e : "0" + e } s = d(s), l = d(l), r = d(r), c = d(c), $(t).text(s), $(n).text(l), $(a).text(r), $(i).text(c), o < 0 && (clearInterval(m), document.getElementById("demo").innerHTML = "EXPIRED")
        }, 1e3),
        e = document.getElementsByClassName("head-menu");
    $(window).scroll(function() { 100 < $(document).scrollTop() ? $(e).addClass("head-menu__active") : $(e).removeClass("head-menu__active") }), 

    $(".problems__slide").click(function() {




        if ( $(window).width() > 992 ) {

	        var e = $(this).attr("id") + "-popup";
	        $(".problems__swiper-slide_modal").each(function() { $(this).fadeOut() }), $("#" + e).fadeIn()

          }

    }), 


    $(".problems__swiper-slide_modal_close").click(function() { $(this).parent().fadeOut() }), 


    $(".platforms__item").click(function() { 


        if ( $(window).width() > 992 ) {

	    	$(".platforms__modal").each(function() { 
	    		$(this).fadeOut(500) }), 
	    	$(this).children(".platforms__modal").fadeIn(500)

          }



    });

    new Swiper(".swiper-container", { direction: "horizontal", slidesPerView: 3, spaceBetween: 30, loop: !0,

    	breakpoints: {
        // when window width is <= 992px
        768: {
          slidesPerView: 2
        },

        // when window width is <= 992px
        543: {
          slidesPerView: 1
        },

   },

     navigation: { nextEl: ".first-swiper-btn-next", prevEl: ".first-swiper-btn-prevs" } });
    $(".functional-modules__open-btn").click(function() { $(".functional-modules__modal").each(function() { $(this).removeClass("functional-modules__modal_active") }), $(this).next(".functional-modules__modal").addClass("functional-modules__modal_active") }), $(".functional-modules__modal_close-btn").click(function() { $(this).parent().parent().removeClass("functional-modules__modal_active") }), AOS.init();
    new Swiper(".problems__slider", { direction: "horizontal", slidesPerView: 4, simulateTouch: !1, loop: false, navigation: { nextEl: ".problems__swiper-btn_next", prevEl: ".problems__swiper-btn_prev" },         breakpoints: {
            // when window width is <= 992px
            992: {
              slidesPerView: 1,
              spaceBetween: 0
            },



        } }); 

    new Swiper(".news__slider", { 
    	direction: "horizontal", 
    	slidesPerView: 4, 
    	watchOverflow: !0, 
    	navigation: { 
    		nextEl: ".news__swiper-btn_next", 
    		prevEl: ".news__swiper-btn_prev" 
    	},

    	breakpoints: {
        // when window width is <= 991px
        991: {
          slidesPerView: 3,
          spaceBetween: 30
        },

        767: {
          slidesPerView: 2,
          spaceBetween: 30
        },

        543: {
          slidesPerView: 1,
          spaceBetween: 30
        },




   } });




    new Swiper(".roadmap__slider", { 
    	direction: "vertical", 
    	slidesPerView: 5, 
    	spaceBetween: 5,
    	initialSlide: 15,
        watchOverflow: !0, 
    	navigation: { 
    		nextEl: ".roadmap__swiper-btn_prev", 
    		prevEl: ".roadmap__swiper-btn_next" 
    	},

    	breakpoints: {

        543: {
          slidesPerView: 3,
          initialSlide: 16,
          sliderDrag:false,
        },




   } });





    particlesJS("particles-js", { particles: { number: { value: 53, density: { enable: !0, value_area: 800 } }, color: { value: "#ffffff" }, shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 4 }, image: { src: "img/github.svg", width: 100, height: 100 } }, opacity: { value: .5, random: !1, anim: { enable: !1, speed: 1, opacity_min: .1, sync: !1 } }, size: { value: 2, random: !0, anim: { enable: !1, speed: 7.308694910712106, size_min: .1, sync: !1 } }, line_linked: { enable: !0, distance: 240.5118091298284, color: "#ffffff", opacity: .2886141709557941, width: .5 }, move: { enable: !0, speed: 1.603412060865523, direction: "none", random: !0, straight: !1, out_mode: "out", bounce: !1, attract: { enable: !1, rotateX: 600, rotateY: 1200 } } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: !0, mode: "repulse" }, onclick: { enable: !0, mode: "push" }, resize: !0 }, modes: { grab: { distance: 400, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 200, duration: .4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } } }, retina_detect: !0 }), particlesJS("particles-js-star", { particles: { number: { value: 130, density: { enable: !0, value_area: 800 } }, color: { value: "#ffffff" }, shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 3 }, image: { src: "img/github.svg", width: 100, height: 100 } }, opacity: { value: .5, random: !1, anim: { enable: !1, speed: 1, opacity_min: .1, sync: !1 } }, size: { value: 1, random: !0, anim: { enable: !1, speed: 40, size_min: .1, sync: !1 } }, line_linked: { enable: !0, distance: 0, color: "#ffffff", opacity: .4, width: 1 }, move: { enable: !0, speed: .5, direction: "none", random: !1, straight: !1, out_mode: "out", bounce: !1, attract: { enable: !1, rotateX: 600, rotateY: 1200 } } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: !0, mode: "repulse" }, onclick: { enable: !0, mode: "push" }, resize: !0 }, modes: { grab: { distance: 700, line_linked: { opacity: 1 } }, bubble: { distance: 400, size: 40, duration: 1, opacity: 8, speed: 1 }, repulse: { distance: 200, duration: .4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } } }, retina_detect: !0 }), particlesJS("particles-js-about1", { particles: { number: { value: 4, density: { enable: !0, value_area: 50 } }, color: { value: "#989898" }, shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 5 }, image: { src: "img/github.svg", width: 100, height: 100 } }, opacity: { value: .5, random: !1, anim: { enable: !1, speed: 1, opacity_min: .1, sync: !1 } }, size: { value: 7.891476416322726, random: !0, anim: { enable: !1, speed: 1, size_min: .1, sync: !1 } }, line_linked: { enable: !0, distance: 150, color: "#000000", opacity: .4, width: 1 }, move: { enable: !0, speed: 1, direction: "none", random: !1, straight: !1, out_mode: "bounce", bounce: !1, attract: { enable: !1, rotateX: 600, rotateY: 1200 } } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: !0, mode: "repulse" }, onclick: { enable: !0, mode: "push" }, resize: !0 }, modes: { grab: { distance: 4, line_linked: { opacity: 1 } }, bubble: { distance: 4, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 2, duration: .4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } } }, retina_detect: !0 }), particlesJS("particles-js-about2", { particles: { number: { value: 7, density: { enable: !0, value_area: 50 } }, color: { value: "#989898" }, shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 5 }, image: { src: "img/github.svg", width: 100, height: 100 } }, opacity: { value: .5, random: !1, anim: { enable: !1, speed: 1, opacity_min: .1, sync: !1 } }, size: { value: 7.891476416322726, random: !0, anim: { enable: !1, speed: 1, size_min: .1, sync: !1 } }, line_linked: { enable: !0, distance: 150, color: "#000000", opacity: .4, width: 1 }, move: { enable: !0, speed: 1, direction: "none", random: !1, straight: !1, out_mode: "bounce", bounce: !1, attract: { enable: !1, rotateX: 600, rotateY: 1200 } } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: !0, mode: "repulse" }, onclick: { enable: !0, mode: "push" }, resize: !0 }, modes: { grab: { distance: 4, line_linked: { opacity: 1 } }, bubble: { distance: 4, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 2, duration: .4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } } }, retina_detect: !0 }), particlesJS("particles-js-about3", { particles: { number: { value: 7, density: { enable: !0, value_area: 50 } }, color: { value: "#989898" }, shape: { type: "circle", stroke: { width: 0, color: "#000000" }, polygon: { nb_sides: 5 }, image: { src: "img/github.svg", width: 100, height: 100 } }, opacity: { value: .2, random: !1, anim: { enable: !1, speed: 1, opacity_min: .1, sync: !1 } }, size: { value: 7.891476416322726, random: !0, anim: { enable: !1, speed: 1, size_min: .1, sync: !1 } }, line_linked: { enable: !0, distance: 150, color: "#000000", opacity: .2, width: 1 }, move: { enable: !0, speed: 1, direction: "none", random: !1, straight: !1, out_mode: "bounce", bounce: !1, attract: { enable: !1, rotateX: 600, rotateY: 1200 } } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: !0, mode: "repulse" }, onclick: { enable: !0, mode: "push" }, resize: !0 }, modes: { grab: { distance: 4, line_linked: { opacity: 1 } }, bubble: { distance: 4, size: 40, duration: 2, opacity: 8, speed: 3 }, repulse: { distance: 2, duration: .4 }, push: { particles_nb: 4 }, remove: { particles_nb: 2 } } }, retina_detect: !0 })
});



$(window).load(function() {
    $(".loader").fadeOut("slow");
  $("#preloader-overlayer").fadeOut("slow");
});

$(document).ready( function () {

    $.ajax({
        type: 'POST',
        url: 'http://localhost:8888/etalonium-gallery-wp/wp-admin/admin-ajax.php',
        dataType: 'json',
        data: 'action=get-models',
        success: function(data) {
            console.log(data);
        }
    });
});